(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[570],{7570:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(7437),l=n(2265),a=n(759),i=n.n(a);function c(e){let{scheduleEntries:t,venues:n,trucks:a}=e,c=(0,l.useRef)(null),o=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(!o.current||c.current)return;let e=i().map(o.current,{scrollWheelZoom:!1}).setView([35.3187,-82.4612],11);return i().tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:"&copy; OpenStreetMap &copy; CARTO"}).addTo(e),c.current=e,()=>{c.current&&(c.current.remove(),c.current=null)}},[]),(0,l.useEffect)(()=>{if(!c.current)return;let e=c.current;e.eachLayer(t=>{t instanceof i().Marker&&e.removeLayer(t)});let r=t.filter(e=>null!==e.venueId),l={};r.forEach(e=>{e.venueId&&(l[e.venueId]||(l[e.venueId]=[]),l[e.venueId].push(e))});let o=i().latLngBounds([]);Object.entries(l).forEach(t=>{let[r,l]=t,c=n.find(e=>e.id===r);if(!c||!c.lat||!c.lng)return;let d=l.map(e=>e.truckId?a.find(t=>t.id===e.truckId):e.otherTruckName?{id:"other",name:e.otherTruckName,cuisineType:""}:null).filter(Boolean);if(!d.length)return;let s=i().divIcon({className:"custom-marker",html:'<div style="background:linear-gradient(135deg,#4d7550,#3b5d3e);color:white;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;box-shadow:0 4px 12px rgba(77,117,80,0.4);border:3px solid white;">\uD83D\uDE9A</div>',iconSize:[40,40],iconAnchor:[20,20]}),u='<div style="min-width:200px;font-family:system-ui"><b style="color:#4d7550">'.concat(c.name,"</b><br><small>").concat(c.address,'</small><hr style="margin:8px 0">').concat(d.map(e=>"\uD83D\uDE9A <b>".concat(e.name,"</b>").concat(e.cuisineType?" <small>(".concat(e.cuisineType,")</small>"):"")).join("<br>"),'<br><a href="https://www.google.com/maps/dir/?api=1&destination=').concat(c.lat,",").concat(c.lng,'" target="_blank" style="display:block;text-align:center;background:#4d7550;color:white;padding:8px;border-radius:8px;text-decoration:none;margin-top:8px;font-size:12px">Get Directions</a></div>');i().marker([c.lat,c.lng],{icon:s}).addTo(e).bindPopup(u),o.extend([c.lat,c.lng])}),o.isValid()&&e.fitBounds(o,{padding:[50,50],maxZoom:13})},[t,n,a]);let d=t.filter(e=>null!==e.venueId);return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{ref:o,className:"h-[500px] rounded-2xl shadow-lg overflow-hidden",style:{zIndex:1}}),(0,r.jsxs)("div",{className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-4 z-10 flex items-center gap-2 text-ridge-700 font-medium",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-ridge-600 rounded-full flex items-center justify-center text-white text-sm",children:"\uD83D\uDE9A"}),d.length," truck",1!==d.length?"s":""," today"]})]})}n(5046)},5046:function(){}}]);