(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{6252:function(e,t,r){Promise.resolve().then(r.bind(r,3849))},3849:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(7437),i=r(2265),s=r(9376),u=r(5526);function c(){let[e,t]=(0,i.useState)(""),[r,c]=(0,i.useState)(""),[o,a]=(0,i.useState)(""),[l,d]=(0,i.useState)(!1),f=(0,s.useRouter)();async function m(t){t.preventDefault(),a(""),d(!0);try{await (0,u.zB)(e,r),f.push("/admin")}catch(e){a("Invalid email or password")}finally{d(!1)}}return(0,n.jsx)("div",{className:"min-h-screen bg-stone-100 flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full max-w-md",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("span",{className:"text-4xl",children:"\uD83D\uDE9A"}),(0,n.jsx)("h1",{className:"font-display text-2xl font-bold text-ridge-700 mt-4",children:"What's Rollin' Local"}),(0,n.jsx)("p",{className:"text-stone-500 mt-2",children:"Sign in to manage your truck"})]}),(0,n.jsxs)("form",{onSubmit:m,className:"space-y-6",children:[o&&(0,n.jsx)("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:o}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Email"}),(0,n.jsx)("input",{type:"email",required:!0,value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border border-stone-300 rounded-lg focus:ring-2 focus:ring-ridge-500 focus:border-ridge-500",placeholder:"you@example.com"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Password"}),(0,n.jsx)("input",{type:"password",required:!0,value:r,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 border border-stone-300 rounded-lg focus:ring-2 focus:ring-ridge-500 focus:border-ridge-500",placeholder:"••••••••"})]}),(0,n.jsx)("button",{type:"submit",disabled:l,className:"w-full bg-ridge-600 hover:bg-ridge-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Signing in...":"Sign In"})]}),(0,n.jsx)("div",{className:"mt-8 text-center",children:(0,n.jsx)("a",{href:"/",className:"text-ridge-600 hover:text-ridge-700 text-sm",children:"← Back to site"})})]})})}},5526:function(e,t,r){"use strict";r.d(t,{$K:function(){return d},Au:function(){return l},D$:function(){return p},Gu:function(){return a},IF:function(){return x},K4:function(){return b},NH:function(){return j},NZ:function(){return m},OQ:function(){return n},ZK:function(){return g},_p:function(){return w},j5:function(){return c},nY:function(){return f},ts:function(){return u},w7:function(){return s},wP:function(){return y},zB:function(){return i},zJ:function(){return h}});let n=(0,r(9066).eI)("https://bnmgkgjnkupookrttsfu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJubWdrZ2pua3Vwb29rcnR0c2Z1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMzgwNTEsImV4cCI6MjA4MDkxNDA1MX0.Jzvrb8y-sFk4919j8gYDriI9TGm7-le-2fU80k_BLUI");async function i(e,t){let{data:r,error:i}=await n.auth.signInWithPassword({email:e,password:t});if(i)throw i;return r}async function s(){let{error:e}=await n.auth.signOut();if(e)throw e}async function u(){let{data:{user:e}}=await n.auth.getUser();return e}function c(e){return"jamminjessjams@gmail.com"===e}async function o(){let{data:e,error:t}=await n.from("trucks").select("*").order("name");return t?(console.error("Error fetching trucks:",t),[]):e||[]}async function a(e){let{data:t,error:r}=await n.from("trucks").insert(e).select().single();if(r)throw r;return t}async function l(e,t){let{data:r,error:i}=await n.from("trucks").update(t).eq("id",e).select().single();if(i)throw i;return r}async function d(e){let{error:t}=await n.from("trucks").delete().eq("id",e);if(t)throw t}async function f(e){let{data:t,error:r}=await n.from("venues").insert(e).select().single();if(r)throw r;return t}async function m(e,t){let{data:r,error:i}=await n.from("venues").update(t).eq("id",e).select().single();if(i)throw i;return r}async function h(e){let{error:t}=await n.from("venues").delete().eq("id",e);if(t)throw t}async function g(e){let{data:t,error:r}=await n.from("schedule").insert(e).select().single();if(r)throw r;return t}async function w(e,t){let{data:r,error:i}=await n.from("schedule").update(t).eq("id",e).select().single();if(i)throw i;return r}async function p(e){let{error:t}=await n.from("schedule").delete().eq("id",e);if(t)throw t}async function x(e){if(c(e))return o();let{data:t,error:r}=await n.from("trucks").select("*").eq("user_id",e).order("name");return r?(console.error("Error fetching trucks for user:",r),[]):t||[]}async function b(e,t){if(c(e)){let{data:e,error:t}=await n.from("schedule").select("*").order("date").order("start_time");return t?(console.error("Error fetching schedule:",t),[]):e||[]}let r=t;if(r||(r=(await x(e)).map(e=>e.id)),0===r.length)return[];let{data:i,error:s}=await n.from("schedule").select("*").in("truck_id",r).order("date").order("start_time");return s?(console.error("Error fetching schedule for user:",s),[]):i||[]}async function y(e,t){let{data:r,error:i}=await n.from("trucks").update({user_id:t}).eq("id",e).select().single();if(i)throw i;return r}async function j(e){let{data:t,error:r}=await n.from("trucks").update({user_id:null}).eq("id",e).select().single();if(r)throw r;return t}}},function(e){e.O(0,[658,971,117,744],function(){return e(e.s=6252)}),_N_E=e.O()}]);